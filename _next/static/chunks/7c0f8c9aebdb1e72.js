(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63131,e=>{"use strict";var t=e.i(30332);e.i(47472);var s=e.i(44050);function a({className:e,noPadding:a=!1,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border shadow-sm",!a&&"py-6",e),...r})}e.s(["Card",()=>a])},77954,e=>{"use strict";let t=(0,e.i(43540).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],77954)},37333,e=>{"use strict";var t=e.i(30332),s=e.i(47472),a=e.i(63131),r=e.i(77954),l=e.i(97527),i=e.i(43540);let n=(0,i.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),c=(0,i.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var o=e.i(44050);let d=[320,640,960,1280,1920];function h({src:e,alt:a="",className:l="",sizes:i,priority:n=!1,widths:c=d,style:h,objectFit:x="cover",onLoad:u,formats:m=["avif","webp"]}){let[p,f]=(0,s.useState)(!!n),[g,b]=(0,s.useState)(!1),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(n)return;let e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(f(!0),e.disconnect())})},{rootMargin:"200px",threshold:.01});return v.current&&e.observe(v.current),()=>e.disconnect()},[n]);let j=e.replace(/\.[^/.]+$/,"");String(j).startsWith("/")||(j="/"+j);let w=String(j=j.replace(/\/+/g,"/")).includes("/gallery/")&&Array.isArray(c)&&c.length>0,y={};return w&&Array.isArray(m)&&m.forEach(e=>{y[e]=function(e,t=d,s="webp"){return t.map(t=>`${e}-${t}.${s} ${t}w`).join(", ")}(j,c,e)}),(0,t.jsxs)("div",{ref:v,className:(0,o.cn)("relative",l),style:h,children:[!g&&(0,t.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/60 to-secondary/30 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(r.Camera,{className:"w-12 h-12 text-[oklch(0.55_0.15_85)]/30"})})]}),p&&(0,t.jsxs)("picture",{children:[w&&m.includes("avif")&&y.avif&&(0,t.jsx)("source",{type:"image/avif",srcSet:y.avif,sizes:i}),w&&m.includes("webp")&&y.webp&&(0,t.jsx)("source",{type:"image/webp",srcSet:y.webp,sizes:i}),(0,t.jsx)("img",{src:e,alt:a,className:`w-full h-full transition-opacity duration-300 ${"cover"===x?"object-cover":"object-contain"} ${g?"opacity-100":"opacity-0"}`,loading:n?"eager":"lazy",decoding:"async",sizes:i,onLoad:e=>{b(!0),u?.(e)}})]})]})}function x(){let[e,i]=(0,s.useState)([]),[o,d]=(0,s.useState)({}),[x,u]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(0),[b,v]=(0,s.useState)({});(0,s.useEffect)(()=>{fetch("/data/gallery.json").then(e=>e.json()).then(e=>{let t=e.allImages||[];i(t),d(t.reduce((e,t)=>{let s=t.year||"其他";return e[s]||(e[s]=[]),e[s].push(t),e},{})),u(!1)}).catch(e=>{u(!1)})},[]);let j=(0,s.useCallback)(()=>{g(t=>t>0?t-1:e.length-1)},[e.length]),w=(0,s.useCallback)(()=>{g(t=>t<e.length-1?t+1:0)},[e.length]);(0,s.useEffect)(()=>{if(!m)return;let e=e=>{"Escape"===e.key&&p(!1),"ArrowLeft"===e.key&&j(),"ArrowRight"===e.key&&w()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,j,w]);let y=(0,s.useCallback)(e=>{g(e),p(!0)},[]),N=(0,s.useMemo)(()=>["2025","2024",...Object.keys(o).filter(e=>"2024"!==e&&"2025"!==e)],[o]);return(0,s.useEffect)(()=>{if(!o||0===Object.keys(o).length)return;let e={};N.forEach(t=>{e[t]=6}),v(e);let t=[];return N.forEach((e,s)=>{let a=o[e];if(!a)return;let r=a.length,l=document.getElementById(`year-${e}`);if(!l)return;let i=6,n=!1,c=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!n&&i<r&&(n=!0,setTimeout(()=>{v(t=>({...t,[e]:Math.min(i+2,r)})),i+=2,n=!1},100*s))})},{rootMargin:"200px",threshold:.1});c.observe(l),t.push(c)}),()=>{t.forEach(e=>e.disconnect())}},[o,N]),(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("section",{className:"pt-32 pb-20 lg:pb-32 px-6 lg:px-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-16",children:[(0,t.jsx)("div",{className:"mb-3 flex justify-center",children:(0,t.jsx)("span",{className:"section-eyebrow",children:"GALLERY // 過往紀錄"})}),(0,t.jsx)("h1",{className:"section-title text-4xl lg:text-6xl font-bold mb-6",children:"活動精彩瞬間"}),(0,t.jsxs)("p",{className:"text-foreground/70 text-lg lg:text-xl max-w-3xl mx-auto",children:["回顧歷屆寒訓的精彩時刻，見證學員們的成長與突破。",(0,t.jsx)("br",{}),"每一張照片都記錄著學習的熱情與團隊的凝聚力。"]})]}),x?(0,t.jsxs)("div",{className:"text-center py-20 text-foreground/70",children:[(0,t.jsx)(r.Camera,{className:"w-16 h-16 mx-auto mb-4 text-[oklch(0.55_0.15_85)]/40 animate-pulse"}),(0,t.jsx)("p",{children:"載入中..."})]}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-20 text-foreground/70",children:[(0,t.jsx)(r.Camera,{className:"w-16 h-16 mx-auto mb-4 text-[oklch(0.55_0.15_85)]/40"}),(0,t.jsx)("p",{children:"目前還沒有照片"})]}):(0,t.jsx)("div",{className:"space-y-20",children:N.map(s=>{let r=o[s];return r&&0!==r.length?(0,t.jsxs)("div",{id:`year-${s}`,style:{contentVisibility:"auto",containIntrinsicSize:"0 600px"},children:[(0,t.jsxs)("div",{className:"mb-8 flex flex-col items-center text-center",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold tracking-tight text-foreground mb-2",children:[s," 年"]}),(0,t.jsx)("div",{className:"w-64 h-0.5 bg-gradient-to-r from-transparent via-[oklch(0.75_0.15_85)] to-transparent"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:r.map((s,r)=>{let l=e.indexOf(s);return(0,t.jsx)(a.Card,{noPadding:!0,onClick:()=>y(l),className:"neon-card rounded-2xl overflow-hidden group cursor-pointer will-change-transform",style:{contain:"layout style paint"},children:(0,t.jsxs)("div",{className:"relative aspect-[4/3] bg-secondary/50 overflow-hidden",style:{transform:"translateZ(0)"},children:[(0,t.jsx)(h,{src:s.src,alt:s.alt,className:"w-full h-full",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",objectFit:"cover"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 translate-y-full group-hover:translate-y-0 transition-transform duration-200 pointer-events-none",children:[(0,t.jsx)("div",{className:"inline-block px-2 py-1 bg-[oklch(0.75_0.15_85)] text-black text-xs font-bold rounded mb-2",children:s.year}),(0,t.jsx)("h3",{className:"text-white font-bold text-xl mb-1 drop-shadow-lg",children:s.title}),s.description&&(0,t.jsx)("p",{className:"text-white/80 text-sm drop-shadow-lg",children:s.description})]})]})},r)})})]},s):null})})]})}),m&&e.length>0&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:()=>p(!1),children:[(0,t.jsx)("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 z-60 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(l.X,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),j()},className:"absolute left-4 z-60 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(n,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),w()},className:"absolute right-4 z-60 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(c,{className:"w-8 h-8 text-white"})}),(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full",children:(0,t.jsx)(h,{src:e[f].src,alt:e[f].alt,className:"w-full h-full",sizes:"100vw",priority:!0,objectFit:"contain"})}),(0,t.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-sm rounded-xl px-6 py-4 text-center",children:[(0,t.jsx)("div",{className:"inline-block px-2 py-1 bg-[oklch(0.75_0.15_85)] text-black text-xs font-bold rounded mb-2",children:e[f].year}),(0,t.jsx)("h3",{className:"text-white font-bold text-xl mb-1",children:e[f].title}),e[f].description&&(0,t.jsx)("p",{className:"text-white/80 text-sm",children:e[f].description}),(0,t.jsxs)("p",{className:"text-white/60 text-xs mt-2",children:[f+1," / ",e.length]})]})]})]})]})}e.s(["default",()=>x],37333)}]);